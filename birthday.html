<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚ ä¼˜ç¾éŸ³ä¹çƒŸèŠ±ç‰ˆ</title>
  <meta name="description" content="æ‰“å¼€å³æ’­æ”¾ç”Ÿæ—¥æ­Œï¼Œæ”¾çƒŸèŠ±é€ç¥ç¦ï½">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #FF6B9D, #C44569);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      color: white;
      opacity: 0;
      animation: pageFade 0.5s ease forwards;
      font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif;
      overflow-x: hidden;
    }
    @keyframes pageFade { to { opacity: 1; } }
    
    .container { max-width: 380px; margin: 0 auto; }
    .card {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(8px);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      text-align: center;
      position: relative;
      z-index: 10;
    }
    .btn {
      width: 100%;
      padding: 14px 0;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 8px 0;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 8px rgba(0,0,0,0.15); }
    .btn:active { transform: scale(0.98); }
    .auto-play-tip {
      font-size: 14px;
      color: #fff8f8;
      margin: 10px 0 5px;
    }
    
    .cake {
      position: relative;
      width: 120px;
      height: 60px;
      margin: 0 auto 20px;
    }
    .cake-base {
      position: absolute;
      bottom: 0;
      width: 120px;
      height: 40px;
      background: #FFB347;
      border-radius: 10px 10px 0 0;
    }
    .cake-top {
      position: absolute;
      bottom: 40px;
      width: 100px;
      height: 20px;
      background: #FF8A65;
      border-radius: 10px 10px 0 0;
      left: 10px;
    }
    .candle {
      position: absolute;
      bottom: 60px;
      width: 6px;
      height: 20px;
      background: #4ECDC4;
      left: 57px;
      border-radius: 3px 3px 0 0;
    }
    .flame {
      position: absolute;
      bottom: 80px;
      width: 12px;
      height: 15px;
      background: #FFE066;
      border-radius: 50% 50% 20% 20%;
      left: 54px;
      animation: flicker 1.5s infinite alternate;
      box-shadow: 0 0 10px #FFE066;
    }
    @keyframes flicker {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(1.1); }
    }

    /* çƒŸèŠ±åŠ¨ç”» */
    .firework {
      position: fixed;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      z-index: 5;
      animation: rise 0.8s linear forwards;
    }
    .firework-burst {
      position: fixed;
      border-radius: 50%;
      z-index: 5;
      animation: burst 0.7s ease-out forwards;
    }
    @keyframes rise { 
      0% { top: 100vh; opacity: 1; } 
      100% { top: 20vh; opacity: 0; } 
    }
    @keyframes burst { 
      0% { transform: scale(1); opacity: 1; } 
      100% { transform: scale(18); opacity: 0; } 
    }
    
    .balloon {
      position: absolute;
      width: 40px;
      height: 50px;
      border-radius: 50%;
      animation: float 15s infinite linear;
      opacity: 0.7;
      z-index: 1;
    }
    .balloon:nth-child(1) { 
      background: #FF6B6B; 
      left: 10%; 
      animation-delay: 0s;
      animation-duration: 18s;
    }
    .balloon:nth-child(2) { 
      background: #4ECDC4; 
      left: 30%; 
      animation-delay: 2s;
      animation-duration: 20s;
    }
    .balloon:nth-child(3) { 
      background: #FFE066; 
      left: 50%; 
      animation-delay: 4s;
      animation-duration: 22s;
    }
    .balloon:nth-child(4) { 
      background: #FF8A65; 
      left: 70%; 
      animation-delay: 6s;
      animation-duration: 24s;
    }
    .balloon:nth-child(5) { 
      background: #9B59B6; 
      left: 90%; 
      animation-delay: 8s;
      animation-duration: 26s;
    }
    @keyframes float {
      0% { bottom: -60px; }
      100% { bottom: 100vh; }
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #f00;
      opacity: 0.7;
      z-index: 4;
    }
    
    .message {
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      font-style: italic;
    }
    
    .music-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    
    .control-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
    }
    
    .slider-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      margin: 5px 0;
    }
    
    .slider-label {
      font-size: 12px;
      margin-bottom: 5px;
      color: #fff8f8;
    }
    
    .slider {
      width: 100%;
      height: 5px;
      -webkit-appearance: none;
      background: rgba(255,255,255,0.3);
      border-radius: 5px;
      outline: none;
    }
    
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: #FFE066;
      cursor: pointer;
    }
    
    .speed-display {
      font-size: 12px;
      color: #fff8f8;
      margin-top: 5px;
    }
    
    /* éå¸¸æŸ”å’Œçš„é—ªå…‰æ•ˆæœ */
    .flash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.05); /* éå¸¸ä½çš„é€æ˜åº¦ */
      opacity: 0;
      z-index: 7;
      pointer-events: none;
      mix-blend-mode: screen; /* ä½¿ç”¨å±å¹•æ··åˆæ¨¡å¼ä½¿é—ªå…‰æ›´è‡ªç„¶ */
    }
    
    .particle {
      position: fixed;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: white;
      opacity: 0;
      z-index: 6;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <!-- æ¼‚æµ®æ°”çƒ -->
  <div class="balloon"></div>
  <div class="balloon"></div>
  <div class="balloon"></div>
  <div class="balloon"></div>
  <div class="balloon"></div>
  
  <!-- éå¸¸æŸ”å’Œçš„é—ªå…‰æ•ˆæœ -->
  <div class="flash" id="flash"></div>
  
  <div class="container">
    <div class="text-center mb-5">
      <h1 class="text-4xl font-bold text-yellow-300 drop-shadow-md">ç”Ÿæ—¥å¿«ä¹</h1>
      <div class="cake">
        <div class="cake-base"></div>
        <div class="cake-top"></div>
        <div class="candle"></div>
        <div class="flame"></div>
      </div>
    </div>

    <div class="card">
      <!-- ç¥ç¦è¯­ -->
      <div class="message">
        <p class="text-lg font-medium">ğŸ‰ ä»Šå¤©æ˜¯ä½ çš„ç‰¹åˆ«æ—¥å­ ğŸ‰</p>
        <p class="mt-3">æ„¿ä½ çš„ç”Ÿå‘½å¦‚çƒŸèŠ±èˆ¬ç»šçƒ‚å¤šå½©ï¼Œ</p>
        <p>æ„¿ä½ çš„ç¬‘å®¹å¦‚é˜³å…‰èˆ¬æ¸©æš–ç¿çƒ‚ï¼Œ</p>
        <p>æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡æƒŠå–œä¸æ¬¢ä¹ï¼</p>
        <p class="mt-3 font-semibold">ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œæ°¸è¿œå¹¸ç¦ï¼âœ¨</p>
      </div>

      <!-- è‡ªåŠ¨æ’­æ”¾éŸ³é¢‘åŒº -->
      <div>
        <p class="auto-play-tip">ä¸€æ®µç¾å¦™çš„ç”Ÿæ—¥æ—‹å¾‹å³å°†ä¸ºä½ å¥å“ï¼Œæ„¿è¿™æ­Œå£°èƒ½ä¸ºä½ å¸¦æ¥æ»¡æ»¡çš„å–œæ‚¦ä¸ç¥ç¦</p>
        <!-- ä½¿ç”¨æœ¬åœ°éŸ³ä¹æ–‡ä»¶ -->
        <audio id="autoPlayAudio" loop preload="auto" class="w-full mt-4">
          <source src="birthday-song.mp3" type="audio/mpeg">
        </audio>
        
        <!-- éŸ³ä¹æ§åˆ¶ -->
        <div class="music-controls">
          <div class="control-row">
            <button id="playBtn" class="btn bg-green-500 text-white" style="width: auto; padding: 8px 15px;">
              æ’­æ”¾ ğŸµ
            </button>
            <button id="pauseBtn" class="btn bg-blue-500 text-white" style="width: auto; padding: 8px 15px;">
              æš‚åœ â¸ï¸
            </button>
          </div>
          
          <!-- éŸ³é‡æ§åˆ¶ -->
          <div class="slider-container">
            <div class="slider-label">éŸ³é‡</div>
            <input type="range" id="volumeSlider" class="slider" min="0" max="1" step="0.1" value="0.7">
          </div>
          
          <!-- é€Ÿåº¦æ§åˆ¶ -->
          <div class="slider-container">
            <div class="slider-label">æ’­æ”¾é€Ÿåº¦</div>
            <input type="range" id="speedSlider" class="slider" min="0.5" max="2" step="0.1" value="1">
            <div class="speed-display" id="speedDisplay">1.0x</div>
          </div>
        </div>
        
        <!-- å¤‡ç”¨æ’­æ”¾æŒ‰é’®ï¼ˆè‹¥è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼‰ -->
        <button id="backupPlayBtn" class="btn bg-purple-500 text-white mt-6" style="display: none;">
          ç‚¹å‡»æ’­æ”¾ç”Ÿæ—¥æ­Œ ğŸµ
        </button>
      </div>

      <!-- çƒŸèŠ±æŒ‰é’® -->
      <button id="fireworkBtn" class="btn bg-yellow-400 text-gray-800 mt-6">
        æ”¾çƒŸèŠ± ğŸ‡
      </button>

      <!-- äºŒç»´ç åˆ†äº« -->
      <div class="mt-15">
        <p class="mb-3">æ‰«ç åˆ†äº«è¿™ä»½ç¥ç¦</p>
        <div id="qrcode" class="mx-auto w-40 h-40 bg-white p-2 rounded-lg"></div>
        <p class="text-sm mt-3 opacity-80">å¾®ä¿¡å³ä¸Šè§’"Â·Â·Â·"ä¹Ÿå¯åˆ†äº«</p>
      </div>
    </div>
  </div>

  <script>
    window.onload = function() {
      // 1. äºŒç»´ç ç”Ÿæˆ
      try {
        new QRCode(document.getElementById('qrcode'), {
          text: window.location.href,
          width: 140,
          height: 140,
          colorDark: '#000',
          colorLight: '#fff',
          correctLevel: QRCode.CorrectLevel.H
        });
      } catch (e) {
        document.getElementById('qrcode').innerHTML = '<span class="text-center text-black text-sm p-2 block">ç‚¹å‡»åˆ†äº«</span>';
      }

      // 2. æ ¸å¿ƒï¼šè‡ªåŠ¨æ’­æ”¾éŸ³é¢‘
      const audio = document.getElementById('autoPlayAudio');
      const backupBtn = document.getElementById('backupPlayBtn');
      const playBtn = document.getElementById('playBtn');
      const pauseBtn = document.getElementById('pauseBtn');
      const volumeSlider = document.getElementById('volumeSlider');
      const speedSlider = document.getElementById('speedSlider');
      const speedDisplay = document.getElementById('speedDisplay');
      const flash = document.getElementById('flash');
      let playTried = false;
      
      // é¢„åŠ è½½æœ¬åœ°çˆ†ç‚¸å£°
      const explosionSounds = [];
      for (let i = 0; i < 5; i++) {
        const explosionSound = new Audio();
        explosionSound.src = "explosion.mp3"; // ä½¿ç”¨æœ¬åœ°çˆ†ç‚¸å£°éŸ³æ•ˆ
        explosionSound.volume = 0.5;
        explosionSound.load();
        explosionSounds.push(explosionSound);
      }
      let explosionSoundIndex = 0;

      // è®¾ç½®åˆå§‹éŸ³é‡å’Œé€Ÿåº¦
      audio.volume = 0.7;
      audio.playbackRate = 1.0;
      
      // éŸ³é‡æ§åˆ¶
      volumeSlider.addEventListener('input', function() {
        audio.volume = this.value;
      });
      
      // é€Ÿåº¦æ§åˆ¶
      speedSlider.addEventListener('input', function() {
        audio.playbackRate = this.value;
        speedDisplay.textContent = this.value + 'x';
      });
      
      // æ’­æ”¾æŒ‰é’®
      playBtn.addEventListener('click', function() {
        audio.play().catch(err => {
          document.querySelector('.auto-play-tip').textContent = 'æ’­æ”¾å¤±è´¥ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®é‡è¯•';
          backupBtn.style.display = 'block';
        });
      });
      
      // æš‚åœæŒ‰é’®
      pauseBtn.addEventListener('click', function() {
        audio.pause();
      });

      // é¡µé¢åŠ è½½åå°è¯•è‡ªåŠ¨æ’­æ”¾
      setTimeout(() => {
        triggerAutoPlay();
      }, 500);

      // ç›‘å¬é¡µé¢äº¤äº’
      document.body.addEventListener('touchstart', triggerAutoPlay, { once: true });
      document.body.addEventListener('click', triggerAutoPlay, { once: true });

      // è‡ªåŠ¨æ’­æ”¾æ ¸å¿ƒå‡½æ•°
      function triggerAutoPlay() {
        if (playTried || !audio.paused) return;
        playTried = true;
        
        audio.play().then(() => {
          document.querySelector('.auto-play-tip').textContent = 'æ­£åœ¨æ’­æ”¾ç”Ÿæ—¥æ­Œï½';
          backupBtn.style.display = 'none';
        }).catch(err => {
          // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ˜¾ç¤ºå¤‡ç”¨æŒ‰é’®
          document.querySelector('.auto-play-tip').textContent = 'è‡ªåŠ¨æ’­æ”¾éœ€è¦æƒé™ï¼Œç‚¹å‡»æŒ‰é’®æ’­æ”¾ï¼š';
          backupBtn.style.display = 'block';
        });
      }

      // å¤‡ç”¨æŒ‰é’®æ’­æ”¾é€»è¾‘
      backupBtn.addEventListener('click', () => {
        audio.play().then(() => {
          document.querySelector('.auto-play-tip').textContent = 'æ­£åœ¨æ’­æ”¾ç”Ÿæ—¥æ­Œï½';
          backupBtn.style.display = 'none';
        }).catch(err => {
          if (navigator.userAgent.includes('MicroMessenger')) {
            alert('è¯·å¼€å¯æƒé™ï¼šé•¿æŒ‰é¡µé¢ç©ºç™½å¤„â†’æƒé™ç®¡ç†â†’å…è®¸éŸ³é¢‘');
          } else {
            alert('è¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸å£°éŸ³æƒé™');
          }
        });
      });

      // 3. çƒŸèŠ±åŠŸèƒ½ï¼ˆä½¿ç”¨æœ¬åœ°çˆ†ç‚¸å£°å’ŒæŸ”å’Œé—ªå…‰æ•ˆæœï¼‰
      document.getElementById('fireworkBtn').onclick = function() {
        const colors = ['#FFE066', '#FF6B6B', '#4ECDC4', '#F38181', '#9B59B6', '#1ABC9C'];
        
        // ç¡®ä¿åœ¨ç”¨æˆ·äº¤äº’åæ’­æ”¾å£°éŸ³
        const playExplosionSound = () => {
          try {
            const explosionSound = explosionSounds[explosionSoundIndex];
            explosionSound.currentTime = 0;
            explosionSound.play().catch(e => {
              console.log("çˆ†ç‚¸å£°æ’­æ”¾å¤±è´¥:", e);
            });
            explosionSoundIndex = (explosionSoundIndex + 1) % explosionSounds.length;
          } catch(e) {
            console.log("çˆ†ç‚¸å£°æ’­æ”¾å¼‚å¸¸:", e);
          }
        };
        
        // éå¸¸æŸ”å’Œçš„é—ªå…‰æ•ˆæœ
        const addFlash = () => {
          flash.animate([
            { opacity: 0.08 }, // éå¸¸ä½çš„é€æ˜åº¦
            { opacity: 0 }
          ], {
            duration: 80, // éå¸¸çŸ­çš„æŒç»­æ—¶é—´
            easing: 'ease-out'
          });
        };
        
        // æ·»åŠ å°ç²’å­æ•ˆæœä»£æ›¿å¼ºé—ªå…‰
        const addParticles = (x, y) => {
          for (let i = 0; i < 5; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = x;
            particle.style.top = y;
            document.body.appendChild(particle);
            
            // ç²’å­åŠ¨ç”»
            const angle = Math.random() * Math.PI * 2;
            const distance = 5 + Math.random() * 10;
            particle.animate([
              { 
                opacity: 0.7,
                transform: 'translate(0, 0) scale(1)'
              },
              { 
                opacity: 0,
                transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0.5)`
              }
            ], {
              duration: 400 + Math.random() * 200,
              easing: 'ease-out'
            });
            
            setTimeout(() => particle.remove(), 600);
          }
        };
        
        for (let i = 0; i < 12; i++) {
          setTimeout(() => {
            // çƒŸèŠ±ä¸Šå‡
            const fw = document.createElement('div');
            fw.className = 'firework';
            const leftPos = Math.random() * 85 + 7.5 + 'vw';
            fw.style.left = leftPos;
            fw.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(fw);

            // çˆ†ç‚¸æ•ˆæœ
            setTimeout(() => {
              fw.remove();
              
              // æ’­æ”¾çˆ†ç‚¸å£°
              playExplosionSound();
              
              // æ·»åŠ éå¸¸æŸ”å’Œçš„é—ªå…‰æ•ˆæœ
              addFlash();
              
              // æ·»åŠ å°ç²’å­æ•ˆæœ
              addParticles(leftPos, fw.style.top);
              
              // åˆ›å»ºçˆ†ç‚¸ç²’å­
              const particleCount = 30 + Math.floor(Math.random() * 20);
              for (let j = 0; j < particleCount; j++) {
                const burst = document.createElement('div');
                burst.className = 'firework-burst';
                burst.style.left = leftPos;
                burst.style.top = fw.style.top;
                burst.style.width = Math.random() * 4 + 2 + 'px';
                burst.style.height = burst.style.width;
                burst.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(burst);
                
                // éšæœºæ–¹å‘ç§»åŠ¨
                const angle = Math.random() * Math.PI * 2;
                const distance = 20 + Math.random() * 60;
                burst.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(1)`;
                
                setTimeout(() => burst.remove(), 700);
              }
            }, 800);
          }, i * 150);
        }
      };
      
      // 4. æ·»åŠ ä¸€äº›å½©è‰²çº¸å±‘æ•ˆæœ
      function createConfetti() {
        const colors = ['#FF6B6B', '#4ECDC4', '#FFE066', '#FF8A65', '#9B59B6'];
        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            document.body.appendChild(confetti);
            
            // åŠ¨ç”»
            const animation = confetti.animate([
              { top: '-10px', transform: `rotate(0deg) scale(1)` },
              { top: '100vh', transform: `rotate(${Math.random() * 720}deg) scale(0.5)` }
            ], {
              duration: 3000 + Math.random() * 3000,
              easing: 'cubic-bezier(0.1, 0.2, 0.8, 0.9)'
            });
            
            animation.onfinish = () => confetti.remove();
          }, i * 100);
        }
      }
      
      // é¡µé¢åŠ è½½ååˆ›å»ºä¸€äº›çº¸å±‘
      setTimeout(createConfetti, 1000);
    };
  </script>
</body>
</html>